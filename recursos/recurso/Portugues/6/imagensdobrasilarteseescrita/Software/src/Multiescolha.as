package src{	import flash.display.MovieClip;	import flash.display.SimpleButton;	import flash.display.StageAlign;	import flash.display.StageScaleMode;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.net.URLRequest;	import flash.net.navigateToURL;	import flash.system.Capabilities;	import flash.system.fscommand;		import src.*;	public class Multiescolha extends MovieClip	{		public var xmlEstrutura:CarregaXML;		public var xmlSWF:CarregaXML;				private var imagem:CarregaImagem;				public var larguraFilme:Number;		public var alturaFilme:Number;				private var barra:barraLoad;		public var quadroAtual:Number;				public var numeroQuestao:Number = 0;				public var respUsuario:Array = new Array("-", "-", "-", "-");				//public var primeiraVez:Boolean = true;				var alturaMenu:Number = 22;				public function Multiescolha ( )		{			addEventListener (Event.ADDED_TO_STAGE, iniciar);						stage.scaleMode = StageScaleMode.NO_SCALE;			stage.align = StageAlign.TOP_LEFT;			stage.addEventListener(Event.RESIZE, onStageResize);						//stage.addEventListener(MouseEvent.MOUSE_UP, onStageMouseUp);						xmlEstrutura = new CarregaXML();			xmlEstrutura.carregaJogo ("XML/estrutura.xml");						xmlSWF = new CarregaXML();			xmlSWF.caminhoSWF ("XML/swf.xml");							// Coloca a função para mostrar a janela de ajuda no botão do menu Ajuda			sair_btn.addEventListener (MouseEvent.CLICK, sair);			creditos.addEventListener (MouseEvent.CLICK, credFC);			ajuda.addEventListener (MouseEvent.CLICK, ajudaFC);			questoes.addEventListener (MouseEvent.CLICK, questoesFC);			proxima.addEventListener(MouseEvent.CLICK, proximaFC);			introducao.addEventListener(MouseEvent.CLICK, introFC);					pulse.visible = false;						ajuda.visible = false;			creditos.visible = false;			sair_btn.visible = false;			proxima.visible = false;			fundoMenu.visible = false;			questoes.visible = false;			separador.visible = false;			introducao.visible = false;						larguraFilme = stage.stageWidth/2;			alturaFilme = stage.stageHeight/2;						barra = new barraLoad();			barra.name = "barra";						//Carrega o primeiro filme dentro do filme principal			imagem = new CarregaImagem("SWF/abertura.swf", barra, 15, 30);			imagem.name = "imagem";						addChildAt (imagem, getChildIndex(getChildByName("fundoTotal"))+1);								}		function iniciar (evt:Event):void		{			bordaE.x = 0;			bordaE.height = stage.stageHeight;						bordaD.x = stage.stageWidth - bordaD.width;			bordaD.height = stage.stageHeight;						bordaC.y = 0;			bordaC.width = stage.stageWidth;						bordaB.y = stage.stageHeight - bordaB.height;			bordaB.width = stage.stageWidth;		}			public function proximaFC (evt:MouseEvent):void		{			//trace (numeroQuestao, xmlEstrutura.vetQuestoes.length-1);			if (numeroQuestao < xmlEstrutura.vetQuestoes.length-1)			{				numeroQuestao++;				Object(imagem.pictLdr.content).reinicia ();			}			else			{								Object(imagem.pictLdr.content).resultado.textCorreta_0.text = Object(imagem.pictLdr.content).transformaNumeroEmLetra(xmlEstrutura.vetQuestoes[0].certa);				Object(imagem.pictLdr.content).resultado.textCorreta_1.text = Object(imagem.pictLdr.content).transformaNumeroEmLetra(xmlEstrutura.vetQuestoes[1].certa);				Object(imagem.pictLdr.content).resultado.textCorreta_2.text = Object(imagem.pictLdr.content).transformaNumeroEmLetra(xmlEstrutura.vetQuestoes[2].certa);				Object(imagem.pictLdr.content).resultado.textCorreta_3.text = Object(imagem.pictLdr.content).transformaNumeroEmLetra(xmlEstrutura.vetQuestoes[3].certa);								Object(imagem.pictLdr.content).resultado.text_0.text = respUsuario[0];				Object(imagem.pictLdr.content).resultado.text_1.text = respUsuario[1];				Object(imagem.pictLdr.content).resultado.text_2.text = respUsuario[2];				Object(imagem.pictLdr.content).resultado.text_3.text = respUsuario[3];																Object(imagem.pictLdr.content).resultado.visible = true;			}			pulse.visible = false;		}		function onStageResize (evt:Event):void		{			iniciaPosicoes ();		}		function onStageMouseUp (evt:MouseEvent)		{			if (Object(imagem.pictLdr.content).numeroQuadro == 2)			{				//trace ("Mouse Up -- ");				Object(imagem.pictLdr.content).mostraTamanho("texto_marcador_1");			}		}		function iniciaPosicoes ():void		{			//b1.x = stage.stageWidth/2 - b1.width/2;			//b1.y = 0;						bordaE.x = 0;			bordaE.height = stage.stageHeight;						bordaD.x = stage.stageWidth - bordaD.width;			bordaD.height = stage.stageHeight;						bordaC.y = 0;			bordaC.width = stage.stageWidth;						bordaB.y = stage.stageHeight - bordaB.height;			bordaB.width = stage.stageWidth;						fundoMenu.width = stage.stageWidth;						sair_btn.x = stage.stageWidth - sair_btn.width - bordaE.width;						//Object(imagem.pictLdr.content).mc.width = stage.stageWidth;			//Object(imagem.pictLdr.content).mc.height = stage.stageHeight;			//Object(imagem).width = stage.stageWidth;			//Object(imagem).height = stage.stageHeight;						//if (Object(imagem.pictLdr.content).numeroQuadro == 2)			//{				//Object(imagem.pictLdr.content).mostraTamanho("texto_marcador_1");			//}				Object(imagem).y = alturaMenu;			//resizeImagem(stage.stageWidth);			Object(imagem).x = (stage.stageWidth - Object(imagem).width)/2;						fundoTotal.width = stage.stageWidth;			fundoTotal.height = stage.stageHeight;									//trace (stage.stageWidth, controle.width, (stage.stageWidth - controle.width)/2);		}		function resizeImagem (largura:Number):void		{			var dw:Number = largura - Object(imagem).width;			//trace ("dw = " + dw, Object(imagem.width), Object(imagem.name))			   			Object(imagem).height += dw*(Object(imagem).height/Object(imagem).width);    		Object(imagem).width = largura;						if (Object(imagem).height+alturaMenu>stage.stageHeight)			{				var dh:Number = stage.stageHeight - Object(imagem).height-alturaMenu;   				Object(imagem).width += dh*(Object(imagem).width/(Object(imagem).height));    			Object(imagem).height = stage.stageHeight-alturaMenu;			}		}			public function aparece (numero:Number):void		{			//Descarrega o swf atual e carrega o novo dependendo do numero passado.			removeObjetoPeloNome ("imagem");			imagem = new CarregaImagem(xmlSWF.vetCaminho[numero-1], barra, 15, 30);			imagem.name = "imagem";			addChildAt (imagem, getChildIndex(getChildByName("fundoTotal"))+1);		}			public function removeObjetoPeloNome (nome:String):void		{			//verifica se objeto existe e se sim, o remove.			if (getChildByName(nome) != null)			{				removeChild (getChildByName(nome));			}		}				public function acertaTags (txtPassado:String):String		{			var myString:String = txtPassado;						var pattern:RegExp = /\[/gi;			myString = myString.replace(pattern, "<");			var pattern2:RegExp = /\]/gi;			myString = myString.replace(pattern2, ">");									var supStartExpression:RegExp = new RegExp("<sup>", "g");			var supEndExpression:RegExp = new RegExp("</sup>", "g");			var subStartExpression:RegExp = new RegExp("<sub>", "g");			var subEndExpression:RegExp = new RegExp("</sub>", "g");			myString = myString.replace(supStartExpression, '<font face=\"GG Superscript\">');			myString = myString.replace(supEndExpression, "</font>");			myString = myString.replace(subStartExpression, '<font face=\"GG Subscript\">');			myString = myString.replace(subEndExpression, "</font>");			return (myString);					}		function sair (evt:MouseEvent):void		{						if (Capabilities.playerType != "PlugIn")			{				fscommand("quit", "true");			}			else			{				var url:String = "about:blank";				var teste:URLRequest = new URLRequest(url);				try				{					navigateToURL (teste, "_self");				}				catch (e:Error)				{					// handle error here				}			}		}		function credFC (evt:MouseEvent):void		{			pulse.visible = false;			aparece (xmlSWF.vetCaminho.length-1);		}		function ajudaFC (evt:MouseEvent):void		{			pulse.visible = false;			aparece (xmlSWF.vetCaminho.length);		}		function questoesFC (evt:MouseEvent):void		{			pulse.visible = false;			aparece (2);		}		function introFC (evt:MouseEvent):void		{			pulse.visible = false;			aparece (1);		}	}}