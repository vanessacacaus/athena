var textoRecursos = [];
    var portI1 = {texto: "D1 - Localizar informações explícitas em um texto", descritor:"DPI01"};
textoRecursos.push(portI1);
    var portI2 = {texto: "D2 - Estabelecer relações entre partes de um texto, identificando repetições ou substituições que contribuem para a continuidade de um texto", descritor:"DPI02"};
textoRecursos.push(portI2);
    var portI3 = {texto: "D3 - Inferir o sentido de uma palavra ou expressão", descritor:"DPI03"};
textoRecursos.push(portI3);
    var portI4 = {texto: "D4 - Inferir uma informação implícita em um texto", descritor:"DPI04"};
textoRecursos.push(portI4);
    var portI5 = {texto: "D5 - Interpretar texto com auxílio de material gráfico diverso (propagandas, quadrinhos, foto etc.)", descritor:"DPI05"};
textoRecursos.push(portI5);
    var portI6 = {texto: "D6 - Identificar o tema de um texto", descritor:"DPI06"};
textoRecursos.push(portI6);
    var portI7 = {texto: "D7 - Identificar o conflito gerador do enredo e os elementos que constroem a narrativa", descritor:"DPI07"};
textoRecursos.push(portI7);
    var portI8 = {texto: "D8 - Estabelecer relação causa/conseqüência entre partes e elementos do texto", descritor:"DPI08"};
textoRecursos.push(portI8);
    var portI9 = {texto: "D9 - Identificar a finalidade de textos de diferentes gêneros", descritor:"DPI09"};
textoRecursos.push(portI9);
    var portI10 = {texto: "D10 - Identificar as marcas lingüísticas que evidenciam o locutor e o interlocutor de um texto", descritor:"DPI10"};
textoRecursos.push(portI10);
    var portI11 = {texto: "D11 - Distinguir um fato da opinião relativa a esse fato", descritor:"DPI11"};
textoRecursos.push(portI11);
    var portI12 = {texto: "D12 - Estabelecer relações lógico-discursivas presentes no texto, marcadas por conjunções, advérbios etc", descritor:"DPI12"};
textoRecursos.push(portI12);
    var portI13 = {texto: "D13 - Identificar efeitos de ironia ou humor em textos variados", descritor:"DPI13"};
textoRecursos.push(portI13);
    var portI14 = {texto: "D14 - Identificar o efeito de sentido decorrente do uso da pontuação e de outras notações", descritor:"DPI14"};
textoRecursos.push(portI14);
    var portI15 = {texto: "D15 - Reconhecer diferentes formas de tratar uma informação na comparação de textos que tratam do mesmo tema, em função das condições em que ele foi produzido e daquelas em que será recebido", descritor:"DPI15"};
textoRecursos.push(portI15);


    var portII1 = {texto: "D1 - Localizar informações explícitas em um texto", descritor:"DPII01"};
textoRecursos.push(portII1);
    var portII2 = {texto: "D2 - Estabelecer relações entre partes de um texto, identificando repetições ou substituições que contribuem para a continuidade de um texto", descritor:"DPII02"};
textoRecursos.push(portII2);
    var portII3 = {texto: "D3 - Inferir o sentido de uma palavra ou expressão", descritor:"DPII03"};
textoRecursos.push(portII3);
    var portII4 = {texto: "D4 - Inferir uma informação implícita em um texto", descritor:"DPII04"};
textoRecursos.push(portII4);
    var portII5 = {texto: "D5 - Interpretar texto com auxílio de material gráfico diverso (propagandas, quadrinhos, foto etc.)", descritor:"DPII05"};
textoRecursos.push(portII5);
    var portII6 = {texto: "D6 - Identificar o tema de um texto", descritor:"DPII06"};
textoRecursos.push(portII6);
    var portII7 = {texto: "D7 - Identificar a tese de um texto", descritor:"DPII07"};
textoRecursos.push(portII7);
    var portII8 = {texto: "D8 - Estabelecer a relação entre a tese e os argumentos oferecidos para sustentá-lá", descritor:"DPII08"};
textoRecursos.push(portII8);
    var portII9 = {texto: "D9 - Diferenciar as partes principais das secundárias em um texto", descritor:"DPII09"};
textoRecursos.push(portII9);
    var portII10 = {texto: "D10 - Identificar o conflito gerador do enredo e os elementos que constroem a narrativa", descritor:"DPII10"};
textoRecursos.push(portII10);
    var portII11 = {texto: "D11 - Estabelecer relação causa/conseqüência entre partes e elementos do texto", descritor:"DPII11"};
textoRecursos.push(portII11);
    var portII12 = {texto: "D12 - Identificar a finalidade de textos de diferentes gêneros", descritor:"DPII12"};
textoRecursos.push(portII12);
    var portII13 = {texto: "D13 - Identificar as marcas lingüísticas que evidenciam o locutor e o interlocutor de um texto", descritor:"DPII13"};
textoRecursos.push(portII13);
    var portII14 = {texto: "D14 - Distinguir um fato da opinião relativa a esse fato", descritor:"DPII14"};
textoRecursos.push(portII14);
    var portII15 = {texto: "D15 - Estabelecer relações lógico-discursivas presentes no texto, marcadas por conjunções, advérbios etc", descritor:"DPII15"};
textoRecursos.push(portII15);
    var portII16 = {texto: "D16 - Identificar efeitos de ironia ou humor em textos variados", descritor:"DPII16"};
textoRecursos.push(portII16);
    var portII17 = {texto: "D17 - Identificar o efeito de sentido decorrente do uso da pontuação e de outras notações", descritor:"DPII17"};
textoRecursos.push(portII17);
    var portII18 = {texto: "D18 - Reconhecer o efeito de sentido decorrente da escolha de uma determinada palavra ou expressão.", descritor:"DPII18"};
textoRecursos.push(portII18);
    var portII19 = {texto: "D19 - Reconhecer o efeito de sentido decorrente da exploração de recursos ortográficos e/ou morfossintáticos.", descritor:"DPII19"};
textoRecursos.push(portII19);
    var portII20 = {texto: "D20 - Reconhecer diferentes formas de tratar uma informação na comparação de textos que tratam do mesmo tema, em função das condições em que ele foi produzido e daquelas em que será recebido", descritor:"DPII20"};
textoRecursos.push(portII20);
    var portII21 = {texto: "D21 - Reconhecer posições distintas entre duas ou mais opiniões relativas ao mesmo fato ou ao mesmo tema.", descritor:"DPII21"};
textoRecursos.push(portII21);


//alert(textoRecursos.length);
var url_string = window.location.href
var url = new URL(url_string);
var identidade = url.searchParams.get("n");

if(String(identidade)==""){
	identidade="null";
}

$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: "data/recursos_pc.tsv",
        dataType: "text",
        success: function(data) {processData(data);}
     });
});

function processData(textoParam){
	var linhas = textoParam.split('\n');
	var recursos = [];
	for (var i=0; i < linhas.length; i++){
	    var aux = linhas[i].split('\t');
	    aux = {identidade:aux[0], nome:aux[1], miniatura:aux[2], resumo:aux[3], disciplina:aux[4], ano:aux[5], descritores:aux[6], linkdown:aux[7], visualizar:aux[8], tema:aux[9], origem:aux[10], autores:aux[11], idioma:aux[12], datacriacao:aux[13]};
	    if(String(identidade)!="null" && String(aux.identidade)!=String(identidade)){
	    	continue;
	    }
	    recursos.push(aux);
		//alert(recursos.length);
		document.getElementById("tituloRecurso").innerHTML = recursos[0].nome;
		document.getElementById("imagemRecurso").src = recursos[0].miniatura;
		document.getElementById("textoRecurso").innerHTML = recursos[0].resumo;
		var thread_descritor = recursos[0].descritores.split(';');
		//alert(thread_descritor.length);

		var descritores = [];
		for (var j = 0; j < thread_descritor.length; j++) {
			for (var k = 0; k < textoRecursos.length; k++) {
				//alert(textoRecursos[k]);
				if(String(textoRecursos[k].descritor) != "null" && String(textoRecursos[k].descritor) == String(thread_descritor[j])){
					//alert(textoRecursos[k].texto);
					var auxiliar = textoRecursos[k].texto;
				}
			}
			descritores.push('<br>'+ auxiliar);				
			//alert(thread_descritor[j]);
		}
		document.getElementById("descritoresRecurso").innerHTML = descritores;
		document.getElementById("metadadosRecurso").innerHTML = recursos[0].tema + '<br>' + recursos[0].origem + '<br>' + recursos[0].autores + '<br>' + recursos[0].idioma + '<br>' + recursos[0].datacriacao;
	}
}

